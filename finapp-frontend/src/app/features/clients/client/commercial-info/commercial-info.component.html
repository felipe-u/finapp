@if (commercialInfo() === undefined) {

} @else {
@if (!editMode) {
<div class="container client-container">
    <div class="cod-container">
        @if (client().codebtor) {
        <p>Codeudor/a</p>
        <button class="primaryBtn" (click)="openCodebtorProfile()">{{ coDebtorName() }}</button>
        } @else {
        <p>Deudor/a</p>
        <button class="primaryBtn" (click)="openDebtorProfile()">{{ debtorName() }}</button>
        }
    </div>
    <div class="info-container">
        <h3 class="container-title">Información general</h3>
        <table>
            <tr>
                <th>Ocupación</th>
                <td>{{ commercialInfo().jobOccupation }}</td>
            </tr>
            <tr>
                <th>Empresa</th>
                <td>{{ commercialInfo().company }}</td>
            </tr>
            <tr id="tr-bar">
                <th>Antigüedad</th>
                <td>{{ commercialInfo().laborSenority }}</td>
            </tr>
            <tr>
                <th>Ingresos</th>
                <td>{{ commercialInfo().income | currency }}</td>
            </tr>
            <tr>
                <th>Ingresos adicionales</th>
                <td>{{ commercialInfo().additionalIncome | currency }}</td>
            </tr>
            <tr>
                <th>Egresos</th>
                <td>{{ commercialInfo().expenses | currency }}</td>
            </tr>
        </table>
    </div>
    <div class="ref-container">
        <h3 class="container-title">Referencias</h3>
        <table>
            <tr>
                <th colspan="3">Familiares</th>
            </tr>
            @for (ref of famReferences(); track ref._id) {
            <tr>
                <td>{{ ref.name }}</td>
                <td>{{ ref.relationship }}</td>
                <td>{{ ref.phone }}</td>
            </tr>
            }
            <tr>
                <th colspan="3">Personales</th>
            </tr>
            @for (ref of perReferences(); track ref._id) {
            <tr>
                <td>{{ ref.name }}</td>
                <td>{{ ref.relationship }}</td>
                <td>{{ ref.phone }}</td>
            </tr>
            }
            <tr>
                <th colspan="3">Comerciales</th>
            </tr>
            @for (ref of comReferences(); track ref._id) {
            <tr>
                <td>{{ ref.name }}</td>
                <td>{{ ref.relationship }}</td>
                <td>{{ ref.phone }}</td>
            </tr>
            }
        </table>
    </div>
    <div class="button-container">
        <button class="primaryBtn editBtn" (click)="prepopulateForm()">Editar</button>
    </div>
</div>
} @else {
<form class="container editMode client-container" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="info-container">
        <h3 class="container-title">Información general</h3>
        <div class="info-edit">
            <fieldset formGroupName="commercialInfo">
                <div class="form-container">
                    <label for="ocupacion">Ocupación</label>
                    <input type="text" name="ocupacion" id="ocupacion" formControlName="jobOccupation" />
                </div>
                <div class="form-container">
                    <label for="empresa">Empresa</label>
                    <input type="text" name="empresa" id="empresa" formControlName="company" />
                </div>
                <div class="form-container">
                    <label for="antiguedad">Antigüedad (años)</label>
                    <input type="number" name="antiguedad" id="antiguedad" formControlName="laborSenority" />
                </div>
                <div class="form-container">
                    <label for="ingresos">Ingresos</label>
                    <input type="text" name="ingresos" id="ingresos" formControlName="income" />
                </div>
                <div class="form-container">
                    <label for="ingresos-ad">Ingresos Adicionales</label>
                    <input type="text" name="ingresos-ad" id="ingresos-ad" formControlName="additionalIncome" />
                </div>
                <div class="form-container">
                    <label for="egresos">Egresos</label>
                    <input type="text" name="egresos" id="egresos" formControlName="expenses" />
                </div>
            </fieldset>
        </div>
    </div>
    <div class="ref-container">
        <div formGroupName="references">
            <h3 class="container-title">Referencias</h3>
            <table>
                <tr>
                    <th colspan="3" style="background-color: lightgray;">Familiares</th>
                </tr>
                <tr formGroupName="famRef1">
                    <td>
                        <input type="text" name="ref1-nombre" id="ref1-nombre" formControlName="name">
                    </td>
                    <td>
                        <select name="ref1-relacion" id="ref1-relacion" formControlName="relationship">
                            <option value="PAD">Padre</option>
                            <option value="MAD">Madre</option>
                            <option value="CYG">Cónyuge</option>
                            <option value="HER">Hermano/a</option>
                            <option value="PRI">Primo/a</option>
                            <option value="TIO">Tío/a</option>
                            <option value="ABU">Abuelo/a</option>
                            <option value="NIE">Nieto/a</option>
                            <option value="OTF">Otro</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ref1-telefono" id="ref1-telefono" formControlName="phone">
                    </td>
                </tr>
                <tr formGroupName="famRef2">
                    <td>
                        <input type="text" name="ref2-nombre" id="ref2-nombre" formControlName="name">
                    </td>
                    <td>
                        <select name="ref2-relacion" id="ref2-relacion" formControlName="relationship">
                            <option value="PAD">Padre</option>
                            <option value="MAD">Madre</option>
                            <option value="CYG">Cónyuge</option>
                            <option value="HER">Hermano/a</option>
                            <option value="PRI">Primo/a</option>
                            <option value="TIO">Tío/a</option>
                            <option value="ABU">Abuelo/a</option>
                            <option value="NIE">Nieto/a</option>
                            <option value="OTF">Otro</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ref2-telefono" id="ref2-telefono" formControlName="phone">
                    </td>
                </tr>
                <tr>
                    <th colspan="3" style="background-color: lightgray;">Personales</th>
                </tr>
                <tr formGroupName="perRef1">
                    <td>
                        <input type="text" name="ref3-nombre" id="ref3-nombre" formControlName="name">
                    </td>
                    <td>
                        <select name="ref3-relacion" id="ref3-relacion" formControlName="relationship">
                            <option value="AMI">Amigo/a</option>
                            <option value="CON">Conocido/a</option>
                            <option value="COM">Comp. de trabajo</option>
                            <option value="VEC" selected>Vecino/a</option>
                            <option value="OTP">Otro</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ref3-telefono" id="ref3-telefono" formControlName="phone">
                    </td>
                </tr>
                <tr formGroupName="perRef2">
                    <td>
                        <input type="text" name="ref4-nombre" id="ref4-nombre" formControlName="name">
                    </td>
                    <td>
                        <select name="ref4-relacion" id="ref4-relacion" formControlName="relationship">
                            <option value="AMI" selected>Amigo/a</option>
                            <option value="CON">Conocido/a</option>
                            <option value="COM">Comp. de trabajo</option>
                            <option value="VEC">Vecino/a</option>
                            <option value="OTP">Otro</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ref4-telefono" id="ref4-telefono" formControlName="phone">
                    </td>
                </tr>
                <tr>
                    <th colspan="3" style="background-color: lightgray;">Comerciales</th>
                </tr>
                <tr formGroupName="comRef1">
                    <td>
                        <input type="text" name="ref5-nombre" id="ref5-nombre" formControlName="name">
                    </td>
                    <td>
                        <select name="ref5-relacion" id="ref5-relacion" formControlName="relationship">
                            <option value="CLI">Cliente</option>
                            <option value="PRO">Proveedor</option>
                            <option value="SOC">Socio</option>
                            <option value="ENF" selected>Entidad Financiera</option>
                            <option value="OTC">Otro</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ref5-telefono" id="ref5-telefono" formControlName="phone">
                    </td>
                </tr>
                <tr formGroupName="comRef2">
                    <td>
                        <input type="text" name="ref6-nombre" id="ref6-nombre" formControlName="name">
                    </td>
                    <td>
                        <select name="ref6-relacion" id="ref6-relacion" formControlName="relationship">
                            <option value="CLI">Cliente</option>
                            <option value="PRO">Proveedor</option>
                            <option value="SOC">Socio</option>
                            <option value="ENF" selected>Entidad Financiera</option>
                            <option value="OTC">Otro</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="ref6-telefono" id="ref6-telefono" formControlName="phone">
                    </td>
                </tr>
            </table>
        </div>

    </div>
    <div class="button-container">
        <button type="submit" class="primaryBtn editBtn">Guardar</button>
        <button type="button" class="primaryBtn editBtn" (click)="changeEditMode()">Cancelar</button>
    </div>
</form>
}
}